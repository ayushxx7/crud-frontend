(this.webpackJsonppeople=this.webpackJsonppeople||[]).push([[0],{84:function(e,n,o){},89:function(e,n,o){"use strict";o.r(n);var t=o(0),a=o.n(t),r=o(11),c=o.n(r),s=o(24),d=o(25),i=o(28),l=o(27),u=o(19),p="ADD_PERSON",b="DELETE_PERSON",j="UPDATE_PERSON",h="GET_PERSON",O="GET_PEOPLE",g="SHOW_POPUP",f="HIDE_POPUP",x=o(22),m=o.n(x),P=o(15),y=function(){return function(e){m.a.get("https://crud-person-node.herokuapp.com/persons").then((function(n){e({type:O,payload:n.data})})).catch((function(e){return console.error(e)}))}},v=o(14),C=o(48),_=o(23),D=o(18),S=o(45),w=o.n(S),E=o(9),I=o(52),k=o(95),N=o(2),T=function(e){var n=e.personId,o=e.handleClose,t=e.deletePerson,a=Object(I.a)(e,["personId","handleClose","deletePerson"]);return Object(N.jsxs)(k.a,Object(E.a)(Object(E.a)({},a),{},{size:"large",children:[Object(N.jsx)(k.a.Header,{closeButton:!0,children:Object(N.jsx)(k.a.Title,{id:"contained-modal-title-lg",children:"Confirm Delete"})}),Object(N.jsxs)(k.a.Body,{children:["This action will remove ",n," from Database. Are you sure?"]}),Object(N.jsxs)(k.a.Footer,{children:[Object(N.jsx)(D.a,{variant:"secondary",onClick:o,children:"Cancel"}),Object(N.jsx)(D.a,{variant:"danger",onClick:t,children:"Delete"})]})]}))},B=(o(84),function(e){Object(i.a)(o,e);var n=Object(l.a)(o);function o(){var e;Object(s.a)(this,o);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n.call.apply(n,[this].concat(a))).handleClose=function(n,o){console.debug("closing delete modal for ".concat(o)),console.debug(o),e.props.hidePopup(o)},e.deleteConfirmed=function(n,o){e.props.hidePopup(o),e.props.deletePerson(o)},e.handleShow=function(n,o){console.debug("showing delete modal for ".concat(o)),console.debug(o),e.props.showPopup(o)},e.renderCard=function(n){return console.debug("rendering..."),Object(N.jsxs)(v.a,{className:"displayPerson mb-2 ml-2 p-3",bg:"light",text:"dark",id:"".concat(n._id),border:"info",children:[Object(N.jsxs)(v.a.Header,{as:"h5",id:"".concat(n._id,"_").concat(n.name),children:[n.name," ",Object(N.jsx)(D.a,{variant:"outline",onClick:function(o){return e.handleShow(o,n._id)},className:"deleteButton p-0",children:"\ud83d\uddd1\ufe0f"}),Object(N.jsx)(T,{show:n.deletePopup,handleClose:function(o){return e.handleClose(o,n._id)},personId:n._id,deletePerson:function(o){return e.deleteConfirmed(o,n._id)}})]}),Object(N.jsxs)(v.a.Body,{children:[Object(N.jsx)(v.a.Title,{id:"".concat(n._id,"_").concat(n.about,"}"),children:n.about}),Object(N.jsx)(v.a.Text,{id:"".concat(n._id)})]}),Object(N.jsxs)(_.a,{className:"list-group-flush",children:[Object(N.jsxs)(_.a.Item,{id:"".concat(n._id,"_").concat(n.languages),children:[Object(N.jsx)("b",{children:"Understands: "}),n.languages.join(", ")]},"".concat(n._id,"_").concat(n.languages)),Object(N.jsxs)(_.a.Item,{id:"".concat(n._id,"_").concat(n.dob),children:[Object(N.jsx)("b",{children:"Born On: "}),new Date(n.dob).toDateString()]},"".concat(n._id,"_").concat(n.dob)),Object(N.jsxs)(_.a.Item,{id:"".concat(n._id,"_").concat(n.profession),children:[Object(N.jsx)("b",{children:"Profession: "}),Object(N.jsx)(w.a,{type:"textfield",mode:"inline",initialValue:n.profession,editText:"\u270f\ufe0f",onSubmit:function(o){return e.props.updatePerson(n._id,o)}})]},"".concat(n._id,"_").concat(n.profession))]})]},"".concat(n._id))},e.displayPeopleCards=function(){return Object.values(e.props.persons).map((function(n,o){return console.debug("INDEX:",n.name,o),e.renderCard(n)}))},e}return Object(d.a)(o,[{key:"componentDidMount",value:function(){document.title="CRUD",this.props.fetchPersons()}},{key:"render",value:function(){return Object(N.jsxs)("div",{className:"container",children:[Object(N.jsx)("h2",{children:"Exisiting People in Database"}),Object(N.jsx)(C.a,{children:this.displayPeopleCards()})]})}}]),o}(a.a.Component)),L=Object(u.b)((function(e){return{persons:e.people.persons,force_render:e.people.force_render}}),{fetchPersons:y,deletePerson:function(e){return function(n){console.debug("Triggering delete on",e),m.a.delete("https://crud-person-node.herokuapp.com/persons/".concat(e)).then((function(){n({type:b,payload:e}),P.b.error("Deleted ".concat(e," from DataBase"))})).catch((function(e){console.error(e),P.b.error("Error while deleting person: ".concat(e))}))}},updatePerson:function(e,n){return function(o){console.debug("Data:",e,n),console.debug("Triggering update on",e),m.a.patch("https://crud-person-node.herokuapp.com/persons/".concat(e),{profession:n}).then((function(e){o({type:j,payload:e.data}),P.b.success("Profession changed to ".concat(n))})).catch((function(e){console.error(e),P.b.error("Error while updating person: ".concat(e))}))}},showPopup:function(e){return function(n){n({type:g,payload:e})}},hidePopup:function(e){return function(n){n({type:f,payload:e})}}})(B),A=o(26),G=o(7),R=o(94),M=o(49),F=function(e){Object(i.a)(o,e);var n=Object(l.a)(o);function o(e){var t;return Object(s.a)(this,o),(t=n.call(this,e)).onChange=function(e){console.debug(e.target.id),t.setState(Object(A.a)({},e.target.id,e.target.value)),console.debug("this.state",t.state,t.state.name)},t.onSubmit=function(e){e.preventDefault(),console.debug("Submit"),console.debug(t.state);var n=t.state;"Single"==n.maritalStatus?(console.debug("Single => Set False"),n.married=!1):(console.debug("Married => Set True"),n.married=!0),t.props.addPerson(n)},t.addPersonForm=function(){var e=t.state,n=e.name,o=e.dob,a=e.address,r=e.profession,c=e.maritalStatus,s=e.languages,d=e.about;return Object(N.jsx)(v.a,{children:Object(N.jsx)(v.a.Body,{children:Object(N.jsx)(R.a,{children:Object(N.jsxs)(G.a,{onSubmit:t.onSubmit,children:[Object(N.jsxs)(G.a.Row,{children:[Object(N.jsxs)(G.a.Group,{as:M.a,controlId:"name",children:[Object(N.jsx)(G.a.Label,{children:"Name"}),Object(N.jsx)(G.a.Control,{type:"text",placeholder:"Enter your Name",required:!0,onChange:t.onChange,value:n})]}),Object(N.jsxs)(G.a.Group,{as:M.a,controlId:"dob",children:[Object(N.jsx)(G.a.Label,{children:"Date of Birth"}),Object(N.jsx)(G.a.Control,{type:"date",placeholder:"Date of Birth",required:!0,value:o,onChange:t.onChange,max:t.getCurrentDate()})]})]}),Object(N.jsxs)(G.a.Row,{children:[Object(N.jsxs)(G.a.Group,{as:M.a,controlId:"profession",children:[Object(N.jsx)(G.a.Label,{children:"Profession"}),Object(N.jsx)(G.a.Control,{onChange:t.onChange,value:r})]}),Object(N.jsxs)(G.a.Group,{as:M.a,controlId:"maritalStatus",children:[Object(N.jsx)(G.a.Label,{children:"Marital Status"}),Object(N.jsxs)(G.a.Control,{as:"select",onChange:t.onChange,value:c,children:[Object(N.jsx)("option",{children:"Single"}),Object(N.jsx)("option",{children:"Married"})]})]})]}),Object(N.jsxs)(G.a.Group,{controlId:"address",children:[Object(N.jsx)(G.a.Label,{children:"Address"}),Object(N.jsx)(G.a.Control,{placeholder:"1234 Main St",value:a,onChange:t.onChange})]}),Object(N.jsxs)(G.a.Group,{controlId:"languages",children:[Object(N.jsx)(G.a.Label,{children:"Languages"}),Object(N.jsx)(G.a.Control,{onChange:t.onChange,value:s})]}),Object(N.jsxs)(G.a.Group,{controlId:"about",children:[Object(N.jsx)(G.a.Label,{children:"About"}),Object(N.jsx)(G.a.Control,{placeholder:"Write something about yourself...",onChange:t.onChange,value:d})]}),Object(N.jsx)(D.a,{variant:"primary",type:"submit",children:"Submit"})]})})})})},t.state={name:"",dob:"",address:"New Delhi, India",profession:"Software Engineer",maritalStatus:!1,languages:"English, Hindi, Python",about:"About me"},t}return Object(d.a)(o,[{key:"getCurrentDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-",n=new Date,o=n.getDate(),t=n.getMonth()+1,a=n.getFullYear();return"".concat(a).concat(e).concat(t<10?"0".concat(t):"".concat(t)).concat(e).concat(o<10?"0".concat(o):"".concat(o))}},{key:"render",value:function(){return Object(N.jsxs)("div",{className:"container",children:[Object(N.jsx)("h2",{children:"Add New Person to Database"}),this.addPersonForm()]})}}]),o}(a.a.Component),H=Object(u.b)((function(e){return{persons:e.people.persons}}),{addPerson:function(e){return function(n){console.debug(e),m.a.post("https://crud-person-node.herokuapp.com/persons",e).then((function(o){n({type:p,payload:o.data.Person}),P.b.dark("Added ".concat(e.name," to DataBase")),n(y())})).catch((function(e){console.error(e),P.b.error("Error while adding person: ".concat(e))}))}}})(F);o(86),o(87);function U(){return Object(N.jsxs)("div",{className:"App",children:[Object(N.jsx)(P.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(N.jsx)("br",{}),Object(N.jsx)(H,{}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)(L,{})]})}var W=o(16),q=o(50),J=o(51),z={persons:[],force_render:{}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case h:return Object(E.a)({},e);case O:var o=n.payload,t={};for(var a in o)o[a].deletePopup=!1,t[o[a]._id]=o[a];return console.debug(t),Object(E.a)(Object(E.a)({},e),{},{persons:t});case p:return console.debug("add person:",n.payload),e.persons[n.payload._id]=n.payload,Object(E.a)(Object(E.a)({},e),{},{persons:e.persons});case j:return Object(E.a)({},e);case b:console.debug("Delete Person"),console.debug(n.payload),console.debug("sp",e.persons);var r=e.persons;return delete r[n.payload],console.debug("old",r),Object(E.a)(Object(E.a)({},e),{},{persons:r,force_render:"forced_rendering"});case g:console.debug("show popup");var c=n.payload,s=e.persons;return s[c].deletePopup=!0,console.debug(s),Object(E.a)(Object(E.a)({},e),{},{persons:s,force_render:"force_render"});case f:console.debug("hide popup");var d=n.payload,i=e.persons;return i[d].deletePopup=!1,Object(E.a)(Object(E.a)({},e),{},{persons:i,force_render:"render_force"});default:return Object(E.a)({},e)}},X=Object(W.combineReducers)({people:V}),Y=[J.a],K=Object(W.createStore)(X,{},Object(q.composeWithDevTools)(W.applyMiddleware.apply(void 0,Y))),Q=document.getElementById("root");c.a.render(Object(N.jsx)(u.a,{store:K,children:Object(N.jsx)(U,{})}),Q)}},[[89,1,2]]]);
//# sourceMappingURL=main.42dd361f.chunk.js.map